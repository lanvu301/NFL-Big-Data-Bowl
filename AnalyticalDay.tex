% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  letterpaper,
  DIV=11,
  numbers=noendperiod]{scrartcl}

\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else  
    % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\setlength{\emergencystretch}{3em} % prevent overfull lines
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
% Make \paragraph and \subparagraph free-standing
\makeatletter
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}{
    \@ifstar
      \xxxParagraphStar
      \xxxParagraphNoStar
  }
  \newcommand{\xxxParagraphStar}[1]{\oldparagraph*{#1}\mbox{}}
  \newcommand{\xxxParagraphNoStar}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}{
    \@ifstar
      \xxxSubParagraphStar
      \xxxSubParagraphNoStar
  }
  \newcommand{\xxxSubParagraphStar}[1]{\oldsubparagraph*{#1}\mbox{}}
  \newcommand{\xxxSubParagraphNoStar}[1]{\oldsubparagraph{#1}\mbox{}}
\fi
\makeatother

\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{241,243,245}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.40,0.45,0.13}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\ExtensionTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.28,0.35,0.67}{#1}}
\newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.46,0.62}{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.07,0.07,0.07}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\newsavebox\pandoc@box
\newcommand*\pandocbounded[1]{% scales image to fit in text height/width
  \sbox\pandoc@box{#1}%
  \Gscale@div\@tempa{\textheight}{\dimexpr\ht\pandoc@box+\dp\pandoc@box\relax}%
  \Gscale@div\@tempb{\linewidth}{\wd\pandoc@box}%
  \ifdim\@tempb\p@<\@tempa\p@\let\@tempa\@tempb\fi% select the smaller of both
  \ifdim\@tempa\p@<\p@\scalebox{\@tempa}{\usebox\pandoc@box}%
  \else\usebox{\pandoc@box}%
  \fi%
}
% Set default figure placement to htbp
\def\fps@figure{htbp}
\makeatother

\KOMAoption{captions}{tableheading}
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Table of contents}
\else
  \newcommand\contentsname{Table of contents}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{List of Figures}
\else
  \newcommand\listfigurename{List of Figures}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{List of Tables}
\else
  \newcommand\listtablename{List of Tables}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figure}
\else
  \newcommand\figurename{Figure}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Table}
\else
  \newcommand\tablename{Table}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{List of Listings}}
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother

\usepackage{bookmark}

\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Analytical Day Report},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}


\title{Analytical Day Report}
\author{}
\date{}

\begin{document}
\maketitle


Step 0:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{plays }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"plays.csv"}\NormalTok{)}
\NormalTok{players }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"nfl{-}big{-}data{-}bowl{-}2025/players.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Step 1: Clean data

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{colSums}\NormalTok{(}\FunctionTok{is.na}\NormalTok{(plays))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                          gameId                           playId 
                               0                                0 
                 playDescription                          quarter 
                               0                                0 
                            down                        yardsToGo 
                               0                                0 
                  possessionTeam                    defensiveTeam 
                               0                                0 
                    yardlineSide                   yardlineNumber 
                             224                                0 
                       gameClock                 preSnapHomeScore 
                               0                                0 
             preSnapVisitorScore           playNullifiedByPenalty 
                               0                                0 
          absoluteYardlineNumber    preSnapHomeTeamWinProbability 
                               0                                0 
preSnapVisitorTeamWinProbability                   expectedPoints 
                               0                                0 
                offenseFormation                receiverAlignment 
                             188                              188 
                 playClockAtSnap                       passResult 
                               1                                0 
                      passLength                          targetX 
                            7398                             7748 
                         targetY                       playAction 
                            7748                                0 
                    dropbackType                 dropbackDistance 
                            5803                             5966 
                passLocationType                      timeToThrow 
                            6812                             7419 
                 timeInTackleBox                       timeToSack 
                            7207                            15516 
                passTippedAtLine                unblockedPressure 
                            6788                             6369 
                         qbSpike                          qbKneel 
                            6788                                0 
                         qbSneak                 rushLocationType 
                            9336                             9336 
                    penaltyYards            prePenaltyYardsGained 
                           15740                                0 
                     yardsGained      homeTeamWinProbabilityAdded 
                               0                                0 
    visitorTeamWinProbilityAdded              expectedPointsAdded 
                               0                                0 
                      isDropback            pff_runConceptPrimary 
                               0                             7053 
         pff_runConceptSecondary                pff_runPassOption 
                           13303                                0 
                pff_passCoverage                      pff_manZone 
                             192                              192 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{handle\_missing\_values }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(df, }\AttributeTok{threshold =} \FloatTok{0.7}\NormalTok{) \{}
  \CommentTok{\# Step 1: Calculate percentage of missing values per column}
\NormalTok{  missing\_percentage }\OtherTok{\textless{}{-}} \FunctionTok{colMeans}\NormalTok{(}\FunctionTok{is.na}\NormalTok{(df))}
  
  \CommentTok{\# Step 2: Drop columns exceeding threshold}
\NormalTok{  cols\_to\_drop }\OtherTok{\textless{}{-}} \FunctionTok{names}\NormalTok{(missing\_percentage[missing\_percentage }\SpecialCharTok{\textgreater{}}\NormalTok{ threshold])}
\NormalTok{  df }\OtherTok{\textless{}{-}}\NormalTok{ df[ , }\SpecialCharTok{!}\NormalTok{(}\FunctionTok{names}\NormalTok{(df) }\SpecialCharTok{\%in\%}\NormalTok{ cols\_to\_drop)]}
  \FunctionTok{message}\NormalTok{(}\StringTok{"Dropped columns with more than "}\NormalTok{, threshold }\SpecialCharTok{*} \DecValTok{100}\NormalTok{, }\StringTok{"\% missing values: "}\NormalTok{, }
          \FunctionTok{paste}\NormalTok{(cols\_to\_drop, }\AttributeTok{collapse =} \StringTok{", "}\NormalTok{))}
  
  \CommentTok{\# Step 3: Separate numeric and categorical columns}
\NormalTok{  numeric\_cols }\OtherTok{\textless{}{-}} \FunctionTok{sapply}\NormalTok{(df, is.numeric)}
\NormalTok{  categorical\_cols }\OtherTok{\textless{}{-}} \SpecialCharTok{!}\NormalTok{numeric\_cols}
  
  \CommentTok{\# Step 4: Impute missing values}
  \CommentTok{\# Numeric: replace NA with mean}
  \ControlFlowTok{for}\NormalTok{ (col }\ControlFlowTok{in} \FunctionTok{names}\NormalTok{(df)[numeric\_cols]) \{}
\NormalTok{    df[[col]][}\FunctionTok{is.na}\NormalTok{(df[[col]])] }\OtherTok{\textless{}{-}} \FunctionTok{mean}\NormalTok{(df[[col]], }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\NormalTok{  \}}
  
  \CommentTok{\# Categorical: replace NA with mode (most frequent value)}
\NormalTok{  mode\_value }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(x) \{}
\NormalTok{    ux }\OtherTok{\textless{}{-}} \FunctionTok{unique}\NormalTok{(}\FunctionTok{na.omit}\NormalTok{(x))}
\NormalTok{    ux[}\FunctionTok{which.max}\NormalTok{(}\FunctionTok{tabulate}\NormalTok{(}\FunctionTok{match}\NormalTok{(x, ux)))]}
\NormalTok{  \}}
  \ControlFlowTok{for}\NormalTok{ (col }\ControlFlowTok{in} \FunctionTok{names}\NormalTok{(df)[categorical\_cols]) \{}
\NormalTok{    df[[col]][}\FunctionTok{is.na}\NormalTok{(df[[col]])] }\OtherTok{\textless{}{-}} \FunctionTok{mode\_value}\NormalTok{(df[[col]])}
\NormalTok{  \}}
  
  \CommentTok{\# Step 5: Verify cleanup}
\NormalTok{  remaining\_missing }\OtherTok{\textless{}{-}} \FunctionTok{colSums}\NormalTok{(}\FunctionTok{is.na}\NormalTok{(df))}
  \FunctionTok{message}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Remaining missing values after handling:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  \FunctionTok{print}\NormalTok{(remaining\_missing)}
  
  \FunctionTok{return}\NormalTok{(df)}
\NormalTok{\}}

\NormalTok{clean\_plays}\OtherTok{\textless{}{-}}\FunctionTok{handle\_missing\_values}\NormalTok{(plays)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Dropped columns with more than 70% missing values: timeToSack, penaltyYards, pff_runConceptSecondary
\end{verbatim}

\begin{verbatim}

Remaining missing values after handling:
\end{verbatim}

\begin{verbatim}
                          gameId                           playId 
                               0                                0 
                 playDescription                          quarter 
                               0                                0 
                            down                        yardsToGo 
                               0                                0 
                  possessionTeam                    defensiveTeam 
                               0                                0 
                    yardlineSide                   yardlineNumber 
                               0                                0 
                       gameClock                 preSnapHomeScore 
                               0                                0 
             preSnapVisitorScore           playNullifiedByPenalty 
                               0                                0 
          absoluteYardlineNumber    preSnapHomeTeamWinProbability 
                               0                                0 
preSnapVisitorTeamWinProbability                   expectedPoints 
                               0                                0 
                offenseFormation                receiverAlignment 
                               0                                0 
                 playClockAtSnap                       passResult 
                               0                                0 
                      passLength                          targetX 
                               0                                0 
                         targetY                       playAction 
                               0                                0 
                    dropbackType                 dropbackDistance 
                               0                                0 
                passLocationType                      timeToThrow 
                               0                                0 
                 timeInTackleBox                 passTippedAtLine 
                               0                                0 
               unblockedPressure                          qbSpike 
                               0                                0 
                         qbKneel                          qbSneak 
                               0                                0 
                rushLocationType            prePenaltyYardsGained 
                               0                                0 
                     yardsGained      homeTeamWinProbabilityAdded 
                               0                                0 
    visitorTeamWinProbilityAdded              expectedPointsAdded 
                               0                                0 
                      isDropback            pff_runConceptPrimary 
                               0                                0 
               pff_runPassOption                 pff_passCoverage 
                               0                                0 
                     pff_manZone 
                               0 
\end{verbatim}

STEP 2: Relationship BETWEEN OFFENSE FORMATION AND YARDGAINED A: Basic
distribtuion of YardGained

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: package 'ggplot2' was built under R version 4.5.1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(clean\_plays, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ yardsGained)) }\SpecialCharTok{+}
  \FunctionTok{geom\_histogram}\NormalTok{(}\AttributeTok{binwidth =} \DecValTok{2}\NormalTok{, }\AttributeTok{fill =} \StringTok{"steelblue"}\NormalTok{, }\AttributeTok{color =} \StringTok{"black"}\NormalTok{, }\AttributeTok{alpha =} \FloatTok{0.7}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Distribution of Yards Gained"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"Yards Gained"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Frequency"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{(}\AttributeTok{base\_size =} \DecValTok{14}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{AnalyticalDay_files/figure-pdf/unnamed-chunk-4-1.pdf}}

Barplot of OffenseFormation

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(clean\_plays, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ offenseFormation)) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{fill =} \StringTok{"darkorange"}\NormalTok{, }\AttributeTok{color =} \StringTok{"black"}\NormalTok{, }\AttributeTok{alpha =} \FloatTok{0.8}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Frequency of Offensive Formations"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"Offensive Formation"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Count"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{(}\AttributeTok{base\_size =} \DecValTok{14}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{axis.text.x =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{angle =} \DecValTok{45}\NormalTok{, }\AttributeTok{hjust =} \DecValTok{1}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{AnalyticalDay_files/figure-pdf/unnamed-chunk-5-1.pdf}}

Bar plot of distribution of passCoverage

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(clean\_plays, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ pff\_passCoverage)) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{fill =} \StringTok{"seagreen3"}\NormalTok{, }\AttributeTok{color =} \StringTok{"black"}\NormalTok{, }\AttributeTok{alpha =} \FloatTok{0.8}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Distribution of Pass Coverage Types"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"PFF Pass Coverage"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Count"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{(}\AttributeTok{base\_size =} \DecValTok{14}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{axis.text.x =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{angle =} \DecValTok{45}\NormalTok{, }\AttributeTok{hjust =} \DecValTok{1}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{AnalyticalDay_files/figure-pdf/unnamed-chunk-6-1.pdf}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: package 'tidyverse' was built under R version 4.5.1
\end{verbatim}

\begin{verbatim}
Warning: package 'tibble' was built under R version 4.5.1
\end{verbatim}

\begin{verbatim}
Warning: package 'tidyr' was built under R version 4.5.1
\end{verbatim}

\begin{verbatim}
Warning: package 'readr' was built under R version 4.5.1
\end{verbatim}

\begin{verbatim}
Warning: package 'purrr' was built under R version 4.5.1
\end{verbatim}

\begin{verbatim}
Warning: package 'dplyr' was built under R version 4.5.1
\end{verbatim}

\begin{verbatim}
Warning: package 'stringr' was built under R version 4.5.1
\end{verbatim}

\begin{verbatim}
Warning: package 'forcats' was built under R version 4.5.1
\end{verbatim}

\begin{verbatim}
Warning: package 'lubridate' was built under R version 4.5.1
\end{verbatim}

\begin{verbatim}
-- Attaching core tidyverse packages ------------------------ tidyverse 2.0.0 --
v dplyr     1.1.4     v readr     2.1.5
v forcats   1.0.0     v stringr   1.5.1
v lubridate 1.9.4     v tibble    3.3.0
v purrr     1.1.0     v tidyr     1.3.1
-- Conflicts ------------------------------------------ tidyverse_conflicts() --
x dplyr::filter() masks stats::filter()
x dplyr::lag()    masks stats::lag()
i Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{formation\_success }\OtherTok{\textless{}{-}}\NormalTok{ clean\_plays }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(offenseFormation) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{Average\_Yards\_Gained =} \FunctionTok{mean}\NormalTok{(yardsGained, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{arrange}\NormalTok{(}\FunctionTok{desc}\NormalTok{(Average\_Yards\_Gained))}

\CommentTok{\# Step 2: Print results in styled console output}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Average Yards Gained by Formation:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Average Yards Gained by Formation:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\FunctionTok{strrep}\NormalTok{(}\StringTok{"="}\NormalTok{, }\DecValTok{50}\NormalTok{), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
================================================== 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\FunctionTok{sprintf}\NormalTok{(}\StringTok{"\%{-}25s \%{-}25s}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, }\StringTok{"Formation"}\NormalTok{, }\StringTok{"Average Yards Gained"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Formation                 Average Yards Gained     
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\FunctionTok{strrep}\NormalTok{(}\StringTok{"{-}"}\NormalTok{, }\DecValTok{50}\NormalTok{), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
-------------------------------------------------- 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \FunctionTok{seq\_len}\NormalTok{(}\FunctionTok{nrow}\NormalTok{(formation\_success))) \{}
\NormalTok{  formation }\OtherTok{\textless{}{-}}\NormalTok{ formation\_success}\SpecialCharTok{$}\NormalTok{offenseFormation[i]}
\NormalTok{  yards }\OtherTok{\textless{}{-}}\NormalTok{ formation\_success}\SpecialCharTok{$}\NormalTok{Average\_Yards\_Gained[i]}
  
  
  \FunctionTok{cat}\NormalTok{(}\FunctionTok{sprintf}\NormalTok{(}\StringTok{"\%{-}25s \%{-}25.2f}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, formation, yards))}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
EMPTY                     5.78                     
SHOTGUN                   5.59                     
SINGLEBACK                5.35                     
PISTOL                    5.04                     
I_FORM                    5.00                     
WILDCAT                   4.64                     
JUMBO                     2.33                     
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Step 3: Visualization (bar chart)}
\FunctionTok{ggplot}\NormalTok{(formation\_success, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =} \FunctionTok{reorder}\NormalTok{(offenseFormation, Average\_Yards\_Gained),}
                              \AttributeTok{y =}\NormalTok{ Average\_Yards\_Gained,}
                              \AttributeTok{fill =}\NormalTok{ Average\_Yards\_Gained}\SpecialCharTok{\textgreater{}}\DecValTok{0}\NormalTok{))}\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{stat =} \StringTok{"identity"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_fill\_manual}\NormalTok{(}\AttributeTok{values =} \FunctionTok{c}\NormalTok{(}\StringTok{"TRUE"} \OtherTok{=} \StringTok{"seagreen3"}\NormalTok{, }\StringTok{"FALSE"} \OtherTok{=} \StringTok{"firebrick2"}\NormalTok{)) }\SpecialCharTok{+}
  \FunctionTok{coord\_flip}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}
    \AttributeTok{title =} \StringTok{"Average Yards Gained by Offensive Formation"}\NormalTok{,}
    \AttributeTok{x =} \StringTok{"Offensive Formation"}\NormalTok{,}
    \AttributeTok{y =} \StringTok{"Average Yards Gained"}
\NormalTok{  ) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{(}\AttributeTok{base\_size =} \DecValTok{14}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{legend.position =} \StringTok{"none"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{AnalyticalDay_files/figure-pdf/unnamed-chunk-7-1.pdf}}

Ok trying new plot with freq added to the graph

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{formation\_summary }\OtherTok{\textless{}{-}}\NormalTok{ clean\_plays }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(offenseFormation) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise}\NormalTok{(}
    \AttributeTok{avg\_yards =} \FunctionTok{mean}\NormalTok{(yardsGained, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{count =} \FunctionTok{n}\NormalTok{()}
\NormalTok{  )}

\FunctionTok{ggplot}\NormalTok{(formation\_summary, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =} \FunctionTok{reorder}\NormalTok{(offenseFormation, avg\_yards))) }\SpecialCharTok{+}
  \FunctionTok{geom\_col}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{y =}\NormalTok{ count }\SpecialCharTok{/} \FunctionTok{max}\NormalTok{(count) }\SpecialCharTok{*} \FunctionTok{max}\NormalTok{(avg\_yards)), }
           \AttributeTok{fill =} \StringTok{"gray80"}\NormalTok{, }\AttributeTok{width =} \FloatTok{0.6}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{geom\_line}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{y =}\NormalTok{ avg\_yards, }\AttributeTok{group =} \DecValTok{1}\NormalTok{, }\AttributeTok{color =} \StringTok{"Average Yards"}\NormalTok{), }\AttributeTok{linewidth =} \FloatTok{1.2}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{y =}\NormalTok{ avg\_yards, }\AttributeTok{color =} \StringTok{"Average Yards"}\NormalTok{), }\AttributeTok{size =} \DecValTok{3}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{coord\_flip}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{scale\_color\_manual}\NormalTok{(}\AttributeTok{values =} \FunctionTok{c}\NormalTok{(}\StringTok{"Average Yards"} \OtherTok{=} \StringTok{"darkgreen"}\NormalTok{)) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}
    \AttributeTok{title =} \StringTok{"Formation Effectiveness (Frequency vs Average Yards)"}\NormalTok{,}
    \AttributeTok{x =} \StringTok{"Offensive Formation"}\NormalTok{,}
    \AttributeTok{y =} \StringTok{"Scaled Count / Average Yards"}
\NormalTok{  ) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{(}\AttributeTok{base\_size =} \DecValTok{14}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{legend.title =} \FunctionTok{element\_blank}\NormalTok{())}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{AnalyticalDay_files/figure-pdf/unnamed-chunk-8-1.pdf}}

Ok next is OffenseFormation by PassCoverage

Let's group the pass\_coverage to smaller group

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{clean\_plays}\SpecialCharTok{$}\NormalTok{coverage\_group }\OtherTok{\textless{}{-}}\NormalTok{ clean\_plays}\SpecialCharTok{$}\NormalTok{pff\_passCoverage}

\NormalTok{clean\_plays}\SpecialCharTok{$}\NormalTok{coverage\_group }\OtherTok{\textless{}{-}}\NormalTok{ forcats}\SpecialCharTok{::}\FunctionTok{fct\_collapse}\NormalTok{(}
\NormalTok{  clean\_plays}\SpecialCharTok{$}\NormalTok{coverage\_group,}
  \AttributeTok{Cover\_3 =} \FunctionTok{c}\NormalTok{(}\StringTok{"Cover{-}3"}\NormalTok{, }\StringTok{"Cover{-}3 Cloud Left"}\NormalTok{, }\StringTok{"Cover{-}3 Cloud Right"}\NormalTok{,}
              \StringTok{"Cover{-}3 Seam"}\NormalTok{, }\StringTok{"Cover{-}3 Double Cloud"}\NormalTok{),}
  \AttributeTok{Cover\_6 =} \FunctionTok{c}\NormalTok{(}\StringTok{"Cover 6{-}Left"}\NormalTok{, }\StringTok{"Cover{-}6 Right"}\NormalTok{),}
  \AttributeTok{Cover\_1 =} \FunctionTok{c}\NormalTok{(}\StringTok{"Cover{-}1"}\NormalTok{, }\StringTok{"Cover{-}1 Double"}\NormalTok{),}
  \AttributeTok{Other\_Rare =} \FunctionTok{c}\NormalTok{(}\StringTok{"Bracket"}\NormalTok{, }\StringTok{"Miscellaneous"}\NormalTok{, }\StringTok{"Prevent"}\NormalTok{, }\StringTok{"2{-}Man"}\NormalTok{, }\StringTok{"Goal Line"}\NormalTok{)}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

See the distribution after grouping

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(clean\_plays, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ coverage\_group)) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{fill =} \StringTok{"seagreen3"}\NormalTok{, }\AttributeTok{color =} \StringTok{"black"}\NormalTok{, }\AttributeTok{alpha =} \FloatTok{0.8}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Distribution of Pass Coverage Types"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"PFF Pass Coverage"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Count"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{(}\AttributeTok{base\_size =} \DecValTok{14}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{axis.text.x =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{angle =} \DecValTok{45}\NormalTok{, }\AttributeTok{hjust =} \DecValTok{1}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{AnalyticalDay_files/figure-pdf/unnamed-chunk-10-1.pdf}}

Now run the plot

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}

\NormalTok{yards\_by\_formation\_cov }\OtherTok{\textless{}{-}}\NormalTok{ clean\_plays }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(offenseFormation, coverage\_group) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise}\NormalTok{(}
    \AttributeTok{avg\_yards =} \FunctionTok{mean}\NormalTok{(yardsGained, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{play\_count =} \FunctionTok{n}\NormalTok{(),}
    \AttributeTok{.groups =} \StringTok{"drop"}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

Visualize it

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}

\FunctionTok{ggplot}\NormalTok{(yards\_by\_formation\_cov, }
       \FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ offenseFormation, }\AttributeTok{y =}\NormalTok{ avg\_yards, }\AttributeTok{fill =}\NormalTok{ coverage\_group)) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{stat =} \StringTok{"identity"}\NormalTok{, }\AttributeTok{position =} \FunctionTok{position\_dodge}\NormalTok{(}\AttributeTok{width =} \FloatTok{0.9}\NormalTok{), }\AttributeTok{color =} \StringTok{"gray30"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_fill\_manual}\NormalTok{(}
    \AttributeTok{values =} \FunctionTok{c}\NormalTok{(}
      \StringTok{"Cover{-}0"}   \OtherTok{=} \StringTok{"\#FFD23F"}\NormalTok{,  }\CommentTok{\# golden yellow}
      \StringTok{"Cover{-}1"}   \OtherTok{=} \StringTok{"\#FFB703"}\NormalTok{,  }\CommentTok{\# orange{-}yellow}
      \StringTok{"Cover{-}2"}   \OtherTok{=} \StringTok{"\#90CAF9"}\NormalTok{,  }\CommentTok{\# light blue}
      \StringTok{"Cover{-}3"}   \OtherTok{=} \StringTok{"\#2196F3"}\NormalTok{,  }\CommentTok{\# mid blue}
      \StringTok{"Cover{-}6"}   \OtherTok{=} \StringTok{"\#1565C0"}\NormalTok{,  }\CommentTok{\# deep blue}
      \StringTok{"Quarters"}  \OtherTok{=} \StringTok{"\#6A1B9A"}\NormalTok{,  }\CommentTok{\# purple accent}
      \StringTok{"Red Zone"}  \OtherTok{=} \StringTok{"\#E63946"}\NormalTok{,  }\CommentTok{\# red}
      \StringTok{"Other\_Rare"}\OtherTok{=} \StringTok{"\#8D99AE"}   \CommentTok{\# neutral gray}
\NormalTok{    )}
\NormalTok{  ) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}
    \AttributeTok{title =} \StringTok{"Average Yards Gained by Formation and Pass Coverage"}\NormalTok{,}
    \AttributeTok{x =} \StringTok{"Offensive Formation"}\NormalTok{,}
    \AttributeTok{y =} \StringTok{"Average Yards Gained"}\NormalTok{,}
    \AttributeTok{fill =} \StringTok{"Pass Coverage Type"}
\NormalTok{  )}\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{(}\AttributeTok{base\_size =} \DecValTok{13}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{axis.text.x =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{angle =} \DecValTok{45}\NormalTok{, }\AttributeTok{hjust =} \DecValTok{1}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{AnalyticalDay_files/figure-pdf/unnamed-chunk-12-1.pdf}}

OK NOW OFFENSIVE FORMATION IN DIFFERENT QUARTER

Compute the yardGain by formation

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}

\CommentTok{\# Summarize average yards by formation and quarter}
\NormalTok{yards\_by\_quarter }\OtherTok{\textless{}{-}}\NormalTok{ clean\_plays }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(offenseFormation, quarter) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise}\NormalTok{(}
    \AttributeTok{avg\_yards =} \FunctionTok{mean}\NormalTok{(yardsGained, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{play\_count =} \FunctionTok{n}\NormalTok{(),}
    \AttributeTok{.groups =} \StringTok{"drop"}
\NormalTok{  )}

\CommentTok{\# Print results}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Average Yards Gained by Formation and Quarter:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Average Yards Gained by Formation and Quarter:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\FunctionTok{strrep}\NormalTok{(}\StringTok{"="}\NormalTok{, }\DecValTok{60}\NormalTok{), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
============================================================ 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\FunctionTok{sprintf}\NormalTok{(}\StringTok{"\%{-}15s \%{-}10s \%{-}20s \%{-}10s}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, }
            \StringTok{"Formation"}\NormalTok{, }\StringTok{"Quarter"}\NormalTok{, }\StringTok{"Average Yards"}\NormalTok{, }\StringTok{"Plays"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Formation       Quarter    Average Yards        Plays     
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\FunctionTok{strrep}\NormalTok{(}\StringTok{"{-}"}\NormalTok{, }\DecValTok{60}\NormalTok{), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
------------------------------------------------------------ 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \FunctionTok{seq\_len}\NormalTok{(}\FunctionTok{nrow}\NormalTok{(yards\_by\_quarter))) \{}
\NormalTok{  formation }\OtherTok{\textless{}{-}}\NormalTok{ yards\_by\_quarter}\SpecialCharTok{$}\NormalTok{offenseFormation[i]}
\NormalTok{  quarter }\OtherTok{\textless{}{-}}\NormalTok{ yards\_by\_quarter}\SpecialCharTok{$}\NormalTok{quarter[i]}
\NormalTok{  yards }\OtherTok{\textless{}{-}}\NormalTok{ yards\_by\_quarter}\SpecialCharTok{$}\NormalTok{avg\_yards[i]}
\NormalTok{  count }\OtherTok{\textless{}{-}}\NormalTok{ yards\_by\_quarter}\SpecialCharTok{$}\NormalTok{play\_count[i]}
  
  \FunctionTok{cat}\NormalTok{(}\FunctionTok{sprintf}\NormalTok{(}\StringTok{"\%{-}15s \%{-}10s \%{-}20.2f \%{-}10d}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, formation, quarter, yards, count))}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
EMPTY           1          5.42                 313       
EMPTY           2          6.47                 402       
EMPTY           3          5.51                 278       
EMPTY           4          5.74                 341       
EMPTY           5          -3.88                8         
I_FORM          1          4.97                 320       
I_FORM          2          5.55                 251       
I_FORM          3          5.29                 228       
I_FORM          4          4.03                 232       
I_FORM          5          11.75                4         
JUMBO           1          3.26                 27        
JUMBO           2          2.54                 35        
JUMBO           3          1.36                 25        
JUMBO           4          2.11                 38        
PISTOL          1          4.09                 159       
PISTOL          2          5.99                 164       
PISTOL          3          4.97                 164       
PISTOL          4          5.33                 147       
PISTOL          5          0.29                 7         
SHOTGUN         1          5.74                 1774      
SHOTGUN         2          5.47                 2583      
SHOTGUN         3          5.96                 1844      
SHOTGUN         4          5.40                 2695      
SHOTGUN         5          4.65                 83        
SINGLEBACK      1          5.77                 984       
SINGLEBACK      2          5.52                 918       
SINGLEBACK      3          5.46                 1034      
SINGLEBACK      4          4.67                 947       
SINGLEBACK      5          4.59                 32        
WILDCAT         1          4.64                 25        
WILDCAT         2          4.78                 23        
WILDCAT         3          4.96                 24        
WILDCAT         4          3.93                 15        
\end{verbatim}

GGPlot

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}

\FunctionTok{ggplot}\NormalTok{(yards\_by\_quarter, }
       \FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ offenseFormation, }\AttributeTok{y =}\NormalTok{ avg\_yards, }\AttributeTok{fill =} \FunctionTok{factor}\NormalTok{(quarter))) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{stat =} \StringTok{"identity"}\NormalTok{, }\AttributeTok{position =} \FunctionTok{position\_dodge}\NormalTok{(}\AttributeTok{width =} \FloatTok{0.9}\NormalTok{), }\AttributeTok{color =} \StringTok{"gray30"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_fill\_manual}\NormalTok{(}
    \AttributeTok{values =} \FunctionTok{c}\NormalTok{(}
      \StringTok{"1"} \OtherTok{=} \StringTok{"\#FFB703"}\NormalTok{,  }\CommentTok{\# orange{-}yellow}
      \StringTok{"2"} \OtherTok{=} \StringTok{"\#90CAF9"}\NormalTok{,  }\CommentTok{\# light blue}
      \StringTok{"3"} \OtherTok{=} \StringTok{"\#2196F3"}\NormalTok{,  }\CommentTok{\# mid blue}
      \StringTok{"4"} \OtherTok{=} \StringTok{"\#1565C0"}\NormalTok{,   }\CommentTok{\# deep blue}
      \StringTok{"5"} \OtherTok{=} \StringTok{"\#8D99AE"}   \CommentTok{\# gray{-}blue for OT}
\NormalTok{    )}
\NormalTok{  ) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}
    \AttributeTok{title =} \StringTok{"Average Yards Gained by Formation and Quarter"}\NormalTok{,}
    \AttributeTok{x =} \StringTok{"Offensive Formation"}\NormalTok{,}
    \AttributeTok{y =} \StringTok{"Average Yards Gained"}\NormalTok{,}
    \AttributeTok{fill =} \StringTok{"Quarter"}
\NormalTok{  ) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{(}\AttributeTok{base\_size =} \DecValTok{13}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}
    \AttributeTok{axis.text.x =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{angle =} \DecValTok{45}\NormalTok{, }\AttributeTok{hjust =} \DecValTok{1}\NormalTok{),}
    \AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{face =} \StringTok{"bold"}\NormalTok{, }\AttributeTok{hjust =} \FloatTok{0.5}\NormalTok{)}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{AnalyticalDay_files/figure-pdf/unnamed-chunk-14-1.pdf}}

CONDUCT AN ANOVA TEST

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Fit model with interaction term}
\NormalTok{model\_interaction }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(yardsGained }\SpecialCharTok{\textasciitilde{}}\NormalTok{ offenseFormation }\SpecialCharTok{*}\NormalTok{coverage\_group , }\AttributeTok{data =}\NormalTok{ clean\_plays)}

\CommentTok{\# Show summary}
\FunctionTok{summary}\NormalTok{(model\_interaction)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = yardsGained ~ offenseFormation * coverage_group, 
    data = clean_plays)

Residuals:
    Min      1Q  Median      3Q     Max 
-74.024  -5.385  -1.970   2.620  91.560 

Coefficients: (1 not defined because of singularities)
                                                  Estimate Std. Error t value
(Intercept)                                         6.2683     1.3730   4.565
offenseFormationI_FORM                             -4.5350     2.1123  -2.147
offenseFormationJUMBO                              -5.8721     1.8285  -3.211
offenseFormationPISTOL                             -5.0183     4.6053  -1.090
offenseFormationSHOTGUN                             0.1714     1.4695   0.117
offenseFormationSINGLEBACK                         -3.9720     1.8211  -2.181
offenseFormationWILDCAT                            -5.6016     5.2583  -1.065
coverage_groupCover-0                              -1.8739     1.7245  -1.087
coverage_groupCover_1                               0.3258     1.4732   0.221
coverage_groupCover-2                              -0.7191     1.5118  -0.476
coverage_groupCover_3                               0.3241     1.4475   0.224
coverage_groupCover_6                              -0.6047     1.6087  -0.376
coverage_groupQuarters                             -1.2313     1.4843  -0.829
coverage_groupRed Zone                             -5.0461     1.8981  -2.658
offenseFormationI_FORM:coverage_groupCover-0        4.5229     2.7971   1.617
offenseFormationJUMBO:coverage_groupCover-0         3.5777     3.4873   1.026
offenseFormationPISTOL:coverage_groupCover-0        3.2239     5.0387   0.640
offenseFormationSHOTGUN:coverage_groupCover-0      -1.8700     1.8703  -1.000
offenseFormationSINGLEBACK:coverage_groupCover-0    2.2205     2.2265   0.997
offenseFormationWILDCAT:coverage_groupCover-0       6.0198     5.7939   1.039
offenseFormationI_FORM:coverage_groupCover_1        3.1387     2.2741   1.380
offenseFormationJUMBO:coverage_groupCover_1         3.4863     2.6171   1.332
offenseFormationPISTOL:coverage_groupCover_1        2.6454     4.7093   0.562
offenseFormationSHOTGUN:coverage_groupCover_1      -0.7411     1.5760  -0.470
offenseFormationSINGLEBACK:coverage_groupCover_1    2.7104     1.9235   1.409
offenseFormationWILDCAT:coverage_groupCover_1       5.6742     5.8631   0.968
offenseFormationI_FORM:coverage_groupCover-2        4.0602     2.3842   1.703
offenseFormationJUMBO:coverage_groupCover-2         0.3228     4.8029   0.067
offenseFormationPISTOL:coverage_groupCover-2        5.5502     4.8681   1.140
offenseFormationSHOTGUN:coverage_groupCover-2       0.5361     1.6201   0.331
offenseFormationSINGLEBACK:coverage_groupCover-2    4.2343     1.9880   2.130
offenseFormationWILDCAT:coverage_groupCover-2      14.0524     7.3358   1.916
offenseFormationI_FORM:coverage_groupCover_3        2.7364     2.1980   1.245
offenseFormationJUMBO:coverage_groupCover_3         4.3908     2.5330   1.733
offenseFormationPISTOL:coverage_groupCover_3        4.0937     4.6568   0.879
offenseFormationSHOTGUN:coverage_groupCover_3      -1.3788     1.5480  -0.891
offenseFormationSINGLEBACK:coverage_groupCover_3    2.9540     1.8893   1.564
offenseFormationWILDCAT:coverage_groupCover_3       2.8492     5.5634   0.512
offenseFormationI_FORM:coverage_groupCover_6        4.2982     2.4712   1.739
offenseFormationJUMBO:coverage_groupCover_6             NA         NA      NA
offenseFormationPISTOL:coverage_groupCover_6        4.8092     4.8650   0.989
offenseFormationSHOTGUN:coverage_groupCover_6       0.5447     1.7172   0.317
offenseFormationSINGLEBACK:coverage_groupCover_6    3.7711     2.0790   1.814
offenseFormationWILDCAT:coverage_groupCover_6       1.9380    10.2784   0.189
offenseFormationI_FORM:coverage_groupQuarters       6.5081     2.3598   2.758
offenseFormationJUMBO:coverage_groupQuarters        2.3350     6.5045   0.359
offenseFormationPISTOL:coverage_groupQuarters       4.7776     4.7162   1.013
offenseFormationSHOTGUN:coverage_groupQuarters      0.2967     1.5948   0.186
offenseFormationSINGLEBACK:coverage_groupQuarters   4.9051     1.9525   2.512
offenseFormationWILDCAT:coverage_groupQuarters      5.4469     5.7021   0.955
offenseFormationI_FORM:coverage_groupRed Zone       6.3461     2.9590   2.145
offenseFormationJUMBO:coverage_groupRed Zone        6.0498     4.5299   1.336
offenseFormationPISTOL:coverage_groupRed Zone       6.8913     5.1582   1.336
offenseFormationSHOTGUN:coverage_groupRed Zone      1.0839     2.0309   0.534
offenseFormationSINGLEBACK:coverage_groupRed Zone   5.6270     2.3900   2.354
offenseFormationWILDCAT:coverage_groupRed Zone      6.5794     6.0907   1.080
                                                  Pr(>|t|)    
(Intercept)                                       5.02e-06 ***
offenseFormationI_FORM                             0.03181 *  
offenseFormationJUMBO                              0.00132 ** 
offenseFormationPISTOL                             0.27587    
offenseFormationSHOTGUN                            0.90713    
offenseFormationSINGLEBACK                         0.02919 *  
offenseFormationWILDCAT                            0.28676    
coverage_groupCover-0                              0.27720    
coverage_groupCover_1                              0.82498    
coverage_groupCover-2                              0.63435    
coverage_groupCover_3                              0.82284    
coverage_groupCover_6                              0.70702    
coverage_groupQuarters                             0.40684    
coverage_groupRed Zone                             0.00786 ** 
offenseFormationI_FORM:coverage_groupCover-0       0.10589    
offenseFormationJUMBO:coverage_groupCover-0        0.30495    
offenseFormationPISTOL:coverage_groupCover-0       0.52229    
offenseFormationSHOTGUN:coverage_groupCover-0      0.31741    
offenseFormationSINGLEBACK:coverage_groupCover-0   0.31863    
offenseFormationWILDCAT:coverage_groupCover-0      0.29883    
offenseFormationI_FORM:coverage_groupCover_1       0.16755    
offenseFormationJUMBO:coverage_groupCover_1        0.18284    
offenseFormationPISTOL:coverage_groupCover_1       0.57430    
offenseFormationSHOTGUN:coverage_groupCover_1      0.63820    
offenseFormationSINGLEBACK:coverage_groupCover_1   0.15883    
offenseFormationWILDCAT:coverage_groupCover_1      0.33317    
offenseFormationI_FORM:coverage_groupCover-2       0.08859 .  
offenseFormationJUMBO:coverage_groupCover-2        0.94641    
offenseFormationPISTOL:coverage_groupCover-2       0.25426    
offenseFormationSHOTGUN:coverage_groupCover-2      0.74073    
offenseFormationSINGLEBACK:coverage_groupCover-2   0.03319 *  
offenseFormationWILDCAT:coverage_groupCover-2      0.05544 .  
offenseFormationI_FORM:coverage_groupCover_3       0.21316    
offenseFormationJUMBO:coverage_groupCover_3        0.08304 .  
offenseFormationPISTOL:coverage_groupCover_3       0.37937    
offenseFormationSHOTGUN:coverage_groupCover_3      0.37309    
offenseFormationSINGLEBACK:coverage_groupCover_3   0.11794    
offenseFormationWILDCAT:coverage_groupCover_3      0.60856    
offenseFormationI_FORM:coverage_groupCover_6       0.08200 .  
offenseFormationJUMBO:coverage_groupCover_6             NA    
offenseFormationPISTOL:coverage_groupCover_6       0.32290    
offenseFormationSHOTGUN:coverage_groupCover_6      0.75109    
offenseFormationSINGLEBACK:coverage_groupCover_6   0.06971 .  
offenseFormationWILDCAT:coverage_groupCover_6      0.85045    
offenseFormationI_FORM:coverage_groupQuarters      0.00582 ** 
offenseFormationJUMBO:coverage_groupQuarters       0.71961    
offenseFormationPISTOL:coverage_groupQuarters      0.31107    
offenseFormationSHOTGUN:coverage_groupQuarters     0.85243    
offenseFormationSINGLEBACK:coverage_groupQuarters  0.01201 *  
offenseFormationWILDCAT:coverage_groupQuarters     0.33947    
offenseFormationI_FORM:coverage_groupRed Zone      0.03199 *  
offenseFormationJUMBO:coverage_groupRed Zone       0.18172    
offenseFormationPISTOL:coverage_groupRed Zone      0.18157    
offenseFormationSHOTGUN:coverage_groupRed Zone     0.59355    
offenseFormationSINGLEBACK:coverage_groupRed Zone  0.01857 *  
offenseFormationWILDCAT:coverage_groupRed Zone     0.28005    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 8.792 on 16069 degrees of freedom
Multiple R-squared:  0.01268,   Adjusted R-squared:  0.009358 
F-statistic: 3.821 on 54 and 16069 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{anova}\NormalTok{(model\_interaction)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Analysis of Variance Table

Response: yardsGained
                                   Df  Sum Sq Mean Sq F value    Pr(>F)    
offenseFormation                    6    1960  326.61  4.2256 0.0002958 ***
coverage_group                      7    9581 1368.72 17.7081 < 2.2e-16 ***
offenseFormation:coverage_group    41    4406  107.46  1.3903 0.0497594 *  
Residuals                       16069 1242028   77.29                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
\end{verbatim}

GGPlot interaction plot

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\FunctionTok{library}\NormalTok{(dplyr)}

\NormalTok{interaction\_summary }\OtherTok{\textless{}{-}}\NormalTok{ clean\_plays }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(offenseFormation, coverage\_group) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{mean\_yards =} \FunctionTok{mean}\NormalTok{(yardsGained, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
`summarise()` has grouped output by 'offenseFormation'. You can override using
the `.groups` argument.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(interaction\_summary,}
       \FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ coverage\_group, }\AttributeTok{y =}\NormalTok{ mean\_yards, }\AttributeTok{color =}\NormalTok{ offenseFormation, }\AttributeTok{group =}\NormalTok{ offenseFormation)) }\SpecialCharTok{+}
  \FunctionTok{geom\_line}\NormalTok{(}\AttributeTok{linewidth =} \FloatTok{1.1}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{size =} \DecValTok{2}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}
    \AttributeTok{title =} \StringTok{"Interaction of Offensive Formation and Pass Coverage on Yards Gained"}\NormalTok{,}
    \AttributeTok{x =} \StringTok{"Pass Coverage Type"}\NormalTok{,}
    \AttributeTok{y =} \StringTok{"Average Yards Gained"}\NormalTok{,}
    \AttributeTok{color =} \StringTok{"Offensive Formation"}
\NormalTok{  ) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{(}\AttributeTok{base\_size =} \DecValTok{14}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{axis.text.x =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{angle =} \DecValTok{45}\NormalTok{, }\AttributeTok{hjust =} \DecValTok{1}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{AnalyticalDay_files/figure-pdf/unnamed-chunk-17-1.pdf}}




\end{document}
